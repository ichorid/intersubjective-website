import{q as I,_ as b,a as w}from"./Cm_z1RtU.js";import{r as E,z as A,A as r,B as D,C as S,v as $,D as x,k as C,m as L,E as R,G as j,d as k,f as B,H as v,e as N,g as K,K as q}from"./CRRJOYo4.js";import{u as z}from"./s2Pl23X5.js";import{u as P,a as T}from"./DplucEZe.js";const V=/^[^-]+.*-.*[^-]+$/,F=/^[^_]+.*_.*[^_]+$/;function M(g,i={}){const o=E([]),u=()=>{o.value.splice(0,o.value.length)},p=A(u,i.chainDelay??800),d=P(),_=e=>{if(!e.key)return;const n=/^[a-z]{1}$/i.test(e.key);let t;if(o.value.push(e.key),o.value.length>=2){t=o.value.slice(-2).join("-");for(const a of f.value.filter(s=>s.chained))if(a.key===t){a.enabled&&(e.preventDefault(),a.handler(e)),u();return}}for(const a of f.value.filter(s=>!s.chained))if(e.key.toLowerCase()===a.key&&e.metaKey===a.metaKey&&e.ctrlKey===a.ctrlKey&&!(n&&e.shiftKey!==a.shiftKey)){a.enabled&&(e.preventDefault(),a.handler()),u();return}p()},m=r(()=>{var a,s,c;const e=(a=d.value)==null?void 0:a.tagName,n=(s=d.value)==null?void 0:s.contentEditable;return e==="INPUT"||e==="TEXTAREA"||n==="true"||n==="plaintext-only"?((c=d.value)==null?void 0:c.name)||!0:!1}),f=r(()=>Object.entries(D(g)).map(([e,n])=>{var c,h;if(!n)return null;let t;e.includes("-")&&e!=="-"&&!((c=e.match(V))!=null&&c.length)&&console.trace(`[Shortcut] Invalid key: "${e}"`),e.includes("_")&&e!=="_"&&!((h=e.match(F))!=null&&h.length)&&console.trace(`[Shortcut] Invalid key: "${e}"`);const a=e.includes("-")&&e!=="-";if(a)t={key:e.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const l=e.toLowerCase().split("_").map(y=>y);t={key:l.filter(y=>!["meta","command","ctrl","shift","alt","option"].includes(y)).join("_"),metaKey:l.includes("meta")||l.includes("command"),ctrlKey:l.includes("ctrl"),shiftKey:l.includes("shift"),altKey:l.includes("alt")||l.includes("option")}}if(t.chained=a,typeof n=="function"?t.handler=n:typeof n=="object"&&(t={...t,handler:n.handler}),!t.handler)return console.trace("[Shortcut] Invalid value"),null;let s=!0;return n.usingInput?typeof n.usingInput=="string"&&(s=m.value===n.usingInput):s=!m.value,t.enabled=s,t}).filter(Boolean));return T("keydown",_)}const U={key:0},W=S({__name:"[...slug]",async setup(g){let i,o;const u=$(),{locale:p,localeProperties:d,t:_}=x(),m=r(()=>Array.isArray(u.params.slug)?u.params.slug:[u.params.slug]),f=r(()=>C(L(p.value,...m.value))),e=r(()=>`content_${p.value}`),{data:n}=([i,o]=R(async()=>z(f.value,async()=>await I(e.value).path(f.value).first(),"$yCqnlWmzBQ")),i=await i,o(),i),t=r(()=>(n.value,n.value));if(!t.value)throw j({statusCode:404,statusMessage:"Page not found"});return M({meta_o:{usingInput:!0,handler:()=>{q.success(_("global.email_copied"))}}}),(a,s)=>{var l;const c=b,h=w;return v(t)?(N(),k("div",U,[K(c,{page:v(t),"is-writing":!1},null,8,["page"]),K(h,{dir:((l=v(d))==null?void 0:l.dir)??"ltr",value:v(t)},null,8,["dir","value"])])):B("",!0)}}});export{W as default};
